<span class="category-row">{{ challenge.category }}</span>

<div class="name-row">
  <div class="dot"></div>
  <span class="name">{{ challenge.name }}</span>
  <div class="difficulty">
    <span
      class="difficulty-star"
      *ngFor="let star of challenge.difficultyAsList"
    >
      <svg
        width="18"
        height="18"
        viewBox="0 0 14 13"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M6.56386 0.511963L8.10332 5.24992H13.0851L9.05475 8.17813L10.5942 12.9161L6.56386 9.98787L2.53352 12.9161L4.07297 8.17813L0.0426283 5.24992H5.02441L6.56386 0.511963Z"
          fill="var(--theme-text)"
        />
      </svg>
    </span>
  </div>
</div>
<div class="description-row" [innerHtml]="challenge.description"></div>
<div class="bottom-row">
  <div class="tags">
    <span *ngFor="let tag of challenge.tagList" class="tag">{{ tag }}</span>
  </div>
  <div class="badge-group">
    <!-- <a
      class="badge"
      *ngIf="challenge.mitigationUrl"
      [href]="challenge.mitigationUrl"
      target="_blank"
      rel="noopener noreferrer"
      matTooltip="Click to learn how to avoid or mitigate similar vulnerabilities!"
    >
      <svg
        width="18"
        height="18"
        viewBox="0 0 18 18"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="8.54167" cy="8.54167" r="8.54167" fill="var(--theme-accent)" />
        <path
          d="M8.51302 12.8417C9.50243 12.5926 10.3193 12.0248 10.9636 11.1385C11.608 10.2522 11.93 9.26817 11.9297 8.18651V5.5813L8.51302 4.30005L5.09635 5.5813V8.18651C5.09635 9.26845 5.41852 10.2526 6.06284 11.1389C6.70717 12.0253 7.5239 12.5929 8.51302 12.8417Z"
          fill="white"
        />
      </svg>
    </a>
    <span class="badge" *ngIf="challenge.hasCodingChallenge" matTooltip="Launch associated coding challenge.">
      <svg
        width="18"
        height="18"
        viewBox="0 0 18 18"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        [style.color]="codingChallengeStatusColor()"
      >
        <circle cx="8.87467" cy="8.54167" r="8.54167" fill="currentColor" />
        <path
          d="M7.30798 13.2092L3.13618 9.04982C3.08666 9.0003 3.05151 8.94666 3.03071 8.88889C3.00991 8.83112 2.99968 8.76922 3.00001 8.7032C3.00001 8.63718 3.01041 8.57528 3.0312 8.51751C3.052 8.45974 3.08699 8.4061 3.13618 8.35658L7.30798 4.18478C7.42352 4.06924 7.56794 4.01147 7.74125 4.01147C7.91456 4.01147 8.06311 4.07337 8.1869 4.19716C8.3107 4.32096 8.37259 4.46538 8.37259 4.63044C8.37259 4.79549 8.3107 4.93992 8.1869 5.06371L4.54741 8.7032L8.1869 12.3427C8.30244 12.4582 8.36021 12.6007 8.36021 12.77C8.36021 12.9394 8.29832 13.0858 8.17453 13.2092C8.05073 13.333 7.90631 13.3949 7.74125 13.3949C7.5762 13.3949 7.43177 13.333 7.30798 13.2092Z"
          fill="white"
        />
        <path
          d="M9.30092 13.2101C9.17713 13.0864 9.11523 12.9398 9.11523 12.7704C9.11523 12.6011 9.17713 12.4547 9.30092 12.3312L12.928 8.70411L9.28854 5.06461C9.173 4.94907 9.11523 4.80465 9.11523 4.63134C9.11523 4.45803 9.17713 4.30948 9.30092 4.18569C9.42472 4.0619 9.57129 4 9.74063 4C9.90998 4 10.0564 4.0619 10.1798 4.18569L14.3393 8.35749C14.3888 8.407 14.4239 8.46065 14.4447 8.51842C14.4655 8.57619 14.4758 8.63808 14.4754 8.70411C14.4754 8.77013 14.465 8.83202 14.4442 8.88979C14.4234 8.94756 14.3885 9.00121 14.3393 9.05072L10.1675 13.2225C10.0519 13.3381 9.90949 13.3958 9.74014 13.3958C9.57079 13.3958 9.42438 13.3339 9.30092 13.2101Z"
          fill="white"
        />
      </svg>
    </span>
    <button class="badge" *ngIf="hasInstructions(challenge.name)" matTooltip="Start an interactive hacking tutorial for this challenge." (click)="startHackingInstructorFor(challenge.name)">
      <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg" [style.color]="codingChallengeStatusColor()">
        <path d="M8.33333 2L1 6L3.66667 7.45333V11.4533L8.33333 14L13 11.4533V7.45333L14.3333 6.72667V11.3333H15.6667V6L8.33333 2ZM12.88 6L8.33333 8.48L3.78667 6L8.33333 3.52L12.88 6ZM11.6667 10.66L8.33333 12.48L5 10.66V8.18L8.33333 10L11.6667 8.18V10.66Z" fill="white"/>
      </svg>
    </button> -->


    <button 
      class="badge"
      *ngIf="challenge.hasCodingChallenge"
      (click)="openCodingChallengeDialog(challenge.key)"
      [disabled]="challenge.solved === false"
      [ngClass]="{
        'partially-completed': challenge.codingChallengeStatus === 1,
        'completed': challenge.codingChallengeStatus === 2
      }"
      [matTooltip]="challenge.solved ? 'Launch associated coding challenge.' : 'You need to solve the hacking challenge before you can start the coding challenge.'"
    >
      <span class="badge-status" *ngIf="challenge.codingChallengeStatus !== 0">{{ challenge.codingChallengeStatus }}/2</span>
      <mat-icon>code</mat-icon>
    </button>
    <!-- info text if the challenge is unavailable -->
    <!-- todo(@J12934) implement -->
    <button class="badge" *ngIf="false">
      <mat-icon>info_outline</mat-icon>
    </button>
    <!-- cheat cheat link-->
    <a
      class="badge not-completable"
      *ngIf="challenge.mitigationUrl"
      [href]="challenge.mitigationUrl"
      target="_blank"
      rel="noopener noreferrer"
      matTooltip="Click to learn how to avoid or mitigate similar vulnerabilities!"
    >
      <mat-icon>policy_outline</mat-icon>
    </a>
    <!-- ctf mode flag repeat-->
    <button 
      class="badge"
      [ngClass]="{ 'completed': challenge.solved }"
      *ngIf="challenge.solved && applicationConfiguration.ctf.showFlagsInNotifications"
      (click)="repeatChallengeNotification(challenge.key)"
      [matTooltip]="'NOTIFICATION_RESEND_INSTRUCTIONS' | translate"
    >
      <mat-icon>flag_outline</mat-icon>
    </button>
    <!-- hacking instructor-->
    <button 
      class="badge not-completable"
      *ngIf="hasInstructions(challenge.name)"
      matTooltip="Start an interactive hacking tutorial for this challenge."
      (click)="startHackingInstructorFor(challenge.name)"
    >
      <mat-icon>school_outline</mat-icon>
    </button>
  </div>
</div>
